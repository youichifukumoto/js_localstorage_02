<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>家族のホウレンソウ</title>
  <link rel="stylesheet" href="css/sample.css">
</head>

<body>
  <header>
    <h1>★ 家族のホウレンソウ ★</h1>
  </header>
  <main>
    <p class="output-date-time" id="time">時間</p>
    <div class="memo">

      <!------パパの掲示板
      ----------------------------------------------->
      <div class="family">
        <p>パ パ</p>
        <input type="text" id="input_1">
        <textarea id="text_area_1"></textarea>
        <button type="button" id="button_1">消しゴム</button>
      </div>

      <!------ママの掲示板
      ----------------------------------------------->
      <div class="family">
        <p>マ マ</p>
        <input type="text" id="input_2">
        <textarea id="text_area_2"></textarea>
        <button type="button" id="button_2">消しゴム</button>
      </div>

      <!------そらの掲示板
      ----------------------------------------------->
      <div class="family">
        <p>そ ら</p>
        <input type="text" id="input_3">
        <textarea id="text_area_3"></textarea>
        <button type="button" id="button_3">消しゴム</button>
      </div>

      <!------たいの掲示板
      ----------------------------------------------->
      <div class="family">
        <p>た い</p>
        <input type="text" id="input_4">
        <textarea id="text_area_4"></textarea>
        <button type="button" id="button_4">消しゴム</button>
      </div>
    </div>
  </main>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>

    //日にち、時間
    const currentDate = new Date();
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth() + 1;
    const date = currentDate.getDate();
    const day = currentDate.getDay();
    const weekday = ("日", "月", "火", "水", "木", "金", "土");

    const hour = formatTime(currentDate.getHours());
    const minute = formatTime(currentDate.getMinutes());
    const second = formatTime(currentDate.getSeconds());

    function formatTime(val) {
      return ("0" + val).slice(-2);
    }
    const outputDateTimeEL = document.querySelector(`.output-date-time`);
    outputDateTimeEL.innerHTML = `${year}年${month}月${date}日${weekday}曜日 ${hour}:${minute}:${second}`;

    // パパのテキストエリア
    // //1.テキストエリアの内容変更でオートセーブチェンジイベント
    $("#text_area_1,#input_1").change(function () {
      const data = {
        title: $("#input_1").val(),
        text: $("#text_area_1").val(),
      };
      const jsonData = JSON.stringify(data);
      localStorage.setItem('papa', jsonData);
    });

    // //2.消しゴム クリックイベント
    $("#button_1").click(function () {
      localStorage.removeItem('papa');
      $("#text_area_1").val('');
      $("#input_1").val('');
    });

    // // 3.ページ読み込み：保存データ取得表示
    if (localStorage.getItem('papa')) {
      const jsonData = localStorage.getItem('papa');
      const data = JSON.parse(jsonData);
      $("#input_1").val(data.title);
      $("#text_area_1").val(data.text);
    }

    // ママのテキストエリア
    // //1.テキストエリアの内容変更でオートセーブチェンジイベント
    $("#text_area_2,#input_2").change(function () {
      const data = {
        title: $("#input_2").val(),
        text: $("#text_area_2").val(),
      };
      const jsonData = JSON.stringify(data);
      localStorage.setItem('mama', jsonData);
    });

    // //2.消しゴム クリックイベント
    $("#button_2").click(function () {
      localStorage.removeItem('mama');
      $("#text_area_2").val('');
      $("#input_2").val('');
    });

    // // 3.ページ読み込み：保存データ取得表示
    if (localStorage.getItem('mama')) {
      const jsonData = localStorage.getItem('mama');
      const data = JSON.parse(jsonData);
      $('#input_2').val(data.title);
      $('#text_area_2').val(data.text);
    }

    // そらのテキストエリア
    // //1.テキストエリアの内容変更でオートセーブチェンジイベント
    $("#text_area_3,#input_3").change(function () {
      const data = {
        title: $("#input_3").val(),
        text: $("#text_area_3").val(),
      };
      const jsonData = JSON.stringify(data);
      localStorage.setItem('sora', jsonData);
    });

    // //2.消しゴム クリックイベント
    $("#button_3").click(function () {
      localStorage.removeItem('sora');
      $("#text_area_3").val('');
      $("#input_3").val('');
    });

    // // 3.ページ読み込み：保存データ取得表示
    if (localStorage.getItem('sora')) {
      const jsonData = localStorage.getItem('sora');
      const data = JSON.parse(jsonData);
      $('#input_3').val(data.title);
      $('#text_area_3').val(data.text);
    }

    // たいのテキストエリア
    // //1.テキストエリアの内容変更でオートセーブチェンジイベント
    $("#text_area_4,#input_4").change(function () {
      const data = {
        title: $("#input_4").val(),
        text: $("#text_area_4").val(),
      };
      const jsonData = JSON.stringify(data);
      localStorage.setItem('tai', jsonData);
    });

    // //2.消しゴム クリックイベント
    $("#button_4").click(function () {
      localStorage.removeItem('tai');
      $("#text_area_4").val('');
      $("#input_4").val('');
    });

    // // 3.ページ読み込み：保存データ取得表示
    if (localStorage.getItem('tai')) {
      const jsonData = localStorage.getItem('tai');
      const data = JSON.parse(jsonData);
      $('#input_4').val(data.title);
      $('#text_area_4').val(data.text);
    }
  </script>

</body>

</html>